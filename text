                            <div className="sec-regulatory-left">
                                <div className='sec-regulatory-text-wrap'>
                                    <Image src="images/securitypage/check.svg" alt='' width={15} height={12} priority={false}></Image>

                                    <div className=''>
                                        <h5 className='h5 text-sb'>21 CFR Part 11 eSignatures</h5>

                                        <p className='text-18 text-rg'>Support electronic signatures that satisfy FDA requirements for authenticity and data integrity.</p>
                                    </div>

                                </div>

                                <div className='sec-regulatory-text-wrap'>
                                    <Image src="images/securitypage/check.svg" alt='' width={15} height={12} priority={false}></Image>

                                    <div className=''>
                                        <h5 className='h5 text-sb'>Immutable Audit Trails</h5>

                                        <p className='text-18 text-rg'>Preserve tamper‑proof records of every transaction and system event for full traceability.</p>
                                    </div>

                                </div>

                                <div className='sec-regulatory-text-wrap'>
                                    <Image src="images/securitypage/check.svg" alt='' width={15} height={12} priority={false}></Image>

                                    <div className=''>
                                        <h5 className='h5 text-sb'>Jurisdiction Packs (US, EU, India)</h5>

                                        <p className='text-18 text-rg'>Use pre‑configured compliance packs tailored to regional regulations and documentation needs.</p>
                                    </div>

                                </div>
                            </div>



                        <Image className='SecurityRegulatoryImage' src="/images/securitypage/SecurityRegulatoryImage.webp" alt='' width={748} height={548} priority></Image>




                                                {/* <div className="capablty-lists-responsive-wrapper">
                            <div className="capablty-lists">
                                <div className="capablty-list">
                                    <div className="capablty-icon site-radius-10">
                                        <Image src="/images/homepage/icon-globe-coverage.svg" alt="capability-icon-1" width={32} height={32} className=""></Image>
                                    </div>

                                    <div className="list-details">
                                        <h5>Global Coverage</h5>

                                        <p>Manage multi-currency transactions, FX conversions, and regional tax regulations seamlessly.</p>
                                    </div>
                                </div>

                               

                                <div className="capablty-list">
                                    <div className="capablty-icon site-radius-10">
                                        <Image src="/images/homepage/icon-ai-automation.svg" alt="capability-icon-1" width={32} height={32} className=""></Image>
                                    </div>

                                    <div className="list-details">
                                        <h5>AI-Powered Automation</h5>

                                        <p>Intelligent algorithms predict, optimize, and execute payment workflows efficiently.</p>
                                    </div>
                                </div>

                                

                                <div className="capablty-list">
                                    <div className="capablty-icon site-radius-10">
                                        <Image src="/images/homepage/icon-auto-payments.svg" alt="capability-icon-1" width={32} height={32} className=""></Image>
                                    </div>

                                    <div className="list-details">
                                        <h5>Automated Payments</h5>

                                        <p>Streamline disbursements and approvals with smart, hands-free workflows.</p>
                                    </div>
                                </div>

                               

                                <div className="capablty-list">
                                    <div className="capablty-icon site-radius-10">
                                        <Image src="/images/homepage/icon-in-built-compliance.svg" alt="capability-icon-1" width={32} height={32} className=""></Image>
                                    </div>

                                    <div className="list-details">
                                        <h5>Compliance Built-In</h5>

                                        <p>Achieve 21 CFR Part 11 readiness with KYC/AML checks and automated tax enforcement.</p>
                                    </div>
                                </div>
                            </div>
                        </div> */}



"use client";

import Image from "next/image";
import { useEffect } from "react";

export default function SolutionStats() {

useEffect(() => {

    // ---------------- COUNTERS ANIMATION (already done) ---------------- //
    const counters = document.querySelectorAll<HTMLHeadingElement>(".soln-stats-cards h4");

const animateCounter = (el: HTMLHeadingElement) => {
    const text = el.innerText;

    if (text.includes("–")) {
        // It's a range like 30–50%
        const [startStr, endStr] = text.split("–");
        const suffix = endStr.replace(/[0-9.\-–]/g, ""); // remove numbers, dot, hyphen, en-dash
        const startTarget = parseFloat(startStr);
        const endTarget = parseFloat(endStr);
        const duration = 2500;
        let startTime: number | null = null;

        const update = (timestamp: number) => {
            if (!startTime) startTime = timestamp;
            const progress = Math.min((timestamp - startTime) / duration, 1);
            const currentStart = Math.floor(progress * startTarget);
            const currentEnd = Math.floor(progress * endTarget);
            el.innerText = `${currentStart}–${currentEnd}${suffix}`;
            if (progress < 1) requestAnimationFrame(update);
        };

        requestAnimationFrame(update);

    } else {
        // Single number like 60s, 99%+
        const suffix = text.replace(/[0-9.\-–]/g, "");
        const target = parseFloat(text);
        const duration = 2500;
        let startTime: number | null = null;

        const update = (timestamp: number) => {
            if (!startTime) startTime = timestamp;
            const progress = Math.min((timestamp - startTime) / duration, 1);
            const current = Math.floor(progress * target);
            el.innerText = `${current}${suffix}`;
            if (progress < 1) requestAnimationFrame(update);
        };

        requestAnimationFrame(update);
    }
};



    // ---------------- DESCRIPTION TEXT ANIMATION ---------------- //
    const desc = document.querySelector(".sol-stats-list-desc");

    const descObserver = new IntersectionObserver(
        (entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    desc?.classList.add("animate");
                }
            });
        },
        { threshold: 0.2 }
    );

    if (desc) descObserver.observe(desc);

    // ---------------- MAIN SECTION OBSERVER FOR COUNTERS ---------------- //
    const observer = new IntersectionObserver(
        (entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    counters.forEach((counter) => animateCounter(counter));
                    observer.disconnect();
                }
            });
        },
        { threshold: 0.4 }
    );

    const section = document.querySelector(".solution-stats-main");
    if (section) observer.observe(section);

}, []);

    return (
        <>
            <section className="section solution-stats-main">
                <div className="container">
                    <div className="solution-stats-text">
                        <h2 className="h3 text-md">Connected payments. Complete control. Seamless payouts.</h2>

                        <p className="h6 text-rg">
                            Dhatu Pay simplifies complex payment workflows for Sponsors, CROs, Sites, Vendors, and Participants with one
                            integrated platform that unifies every payment process.
                        </p>
                    </div>

                    <div className="sol-stats-list">
                        <Image className="soln-stats-img" src="/images/solutionpage/Sol-stats-img.webp" alt="sol-stats-img" width={798} height={357} />

                        <div className="sol-stats-list-desc">
                            <p className="text-md h5">Includes</p>

                            <ul>
                                <li className="sol-tick-desc text-rg text-18">
                                    <span><Image src="/images/solutionpage/soln-stats-tick.svg" alt="" width={15} height={12} /></span>
                                    Multi-entity integration for seamless collaboration
                                </li>

                                <li className="sol-tick-desc text-rg text-18">
                                    <span><Image src="/images/solutionpage/soln-stats-tick.svg" alt="" width={15} height={12} /></span>
                                    Global compliance with regulatory and financial standards
                                </li>

                                <li className="sol-tick-desc text-rg text-18">
                                    <span><Image src="/images/solutionpage/soln-stats-tick.svg" alt="" width={15} height={12} /></span>
                                    Automated payment workflows for Sponsors, CROs, Sites, and Vendors
                                </li>

                                <li className="sol-tick-desc text-rg text-18">
                                    <span><Image src="/images/solutionpage/soln-stats-tick.svg" alt="" width={15} height={12} /></span>
                                    Fast participant reimbursements for travel and stipends
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div className="sol-stats-cards">
                        <div className="sol-stats-card-1">
                            <div className="stats-cards-1 soln-stats-cards">
                                <h4 className="h2 text-sb" data-target="50">30–50%</h4>
                                <p className="text-grey h6 text-md">Faster cycle times</p>
                            </div>

                            <div className="stats-cards-2 soln-stats-cards">
                                <h4 className="h2 text-sb" data-target="60">60s</h4>
                                <p className="h6 text-md">Total Payout Initiation</p>
                            </div>
                        </div>

                        <div className="sol-stats-card-2">
                            <div className="stats-cards-3 soln-stats-cards">
                                <h4 className="h2 text-sb" data-target="99">99%+</h4>
                                <p className="h6 text-md">Payout Success</p>
                            </div>

                            <div className="stats-cards-4 soln-stats-cards">
                                <h4 className="h2 text-sb" data-target="180">180+</h4>
                                <p className="text-grey h6 text-md">Integration with CTMS</p>
                            </div>
                        </div>

                        <div className="sol-stats-card-3">
                            <div className="stats-cards-5">
                                <div className="soln-stats-text-wrap" style={{ textAlign: 'center' }}>
                                    <h4 className="h2 text-sb">(US/EU/IN)</h4>
                                    <p className="h6 text-md">Global compliance</p>
                                </div>
                                <p className="h6 text-rg">
                                    Included in jurisdiction packs to ensure region-specific compliance, tax handling, and also regulatory alignment
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </>
    );
}


                        <div className="sol-stats-scroll-wrapper">
                            <div className="scroll-track">
                                <div className="stats-cards-1 soln-stats-cards">
                                    <h4 className="h2 text-sb">30–50%</h4>
                                    <p className="text-grey h6 text-md">Faster cycle times</p>
                                </div>

                                <div className="stats-cards-2 soln-stats-cards">
                                    <h4 className="h2 text-sb">60s</h4>
                                    <p className="h6 text-md">Total Payout Initiation</p>
                                </div>

                                <div className="stats-cards-4 soln-stats-cards">
                                    <h4 className="h2 text-sb">180+</h4>
                                    <p className="text-grey h6 text-md">Integration with CTMS</p>
                                </div>

                                <div className="stats-cards-3 soln-stats-cards">
                                    <h4 className="h2 text-sb"> 99%+</h4>
                                    <p className="h6 text-md">Payout Success</p>
                                </div>
                            </div>

                            <div className="scroll-track">
                                <div className="stats-cards-1 soln-stats-cards">
                                    <h4 className="h2 text-sb">30–50%</h4>
                                    <p className="text-grey h6 text-md">Faster cycle times</p>
                                </div>

                                <div className="stats-cards-2 soln-stats-cards">
                                    <h4 className="h2 text-sb">60s</h4>
                                    <p className="h6 text-md">Total Payout Initiation</p>
                                </div>

                                <div className="stats-cards-4 soln-stats-cards">
                                    <h4 className="h2 text-sb">180+</h4>
                                    <p className="text-grey h6 text-md">Integration with CTMS</p>
                                </div>

                                <div className="stats-cards-3 soln-stats-cards">
                                    <h4 className="h2 text-sb"> 99%+</h4>
                                    <p className="h6 text-md">Payout Success</p>
                                </div>


                            </div>

                        </div>